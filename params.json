{"name":"Puppet-elasticsearch","tagline":"Elasticsearch Puppet module","body":"# puppet-elasticsearch\r\n\r\nA puppet module for managing elasticsearch nodes\r\n\r\nhttp://www.elasticsearch.org/\r\n\r\n[![Build Status](https://travis-ci.org/elasticsearch/puppet-elasticsearch.png?branch=master)](https://travis-ci.org/elasticsearch/puppet-elasticsearch)\r\n\r\n## Usage\r\n\r\nInstallation, make sure service is running and will be started at boot time:\r\n\r\n     class { 'elasticsearch': }\r\n\r\nInstall a certain version:\r\n\r\n     class { 'elasticsearch':\r\n       version => '0.90.3'\r\n     }\r\n\r\nThis assumes an elasticsearch package is already available to your distribution's package manager. To install it in a different way:\r\n\r\nTo download from http/https/ftp source:\r\n\r\n     class { 'elasticsearch':\r\n       package_url => 'https://download.elasticsearch.org/elasticsearch/elasticsearch/elasticsearch-0.90.7.deb'\r\n     }\r\n\r\nTo download from a puppet:// source:\r\n\r\n     class { 'elasticsearch':\r\n       package_url => 'puppet:///path/to/elasticsearch-0.90.7.deb'\r\n     }\r\n\r\nOr use a local file source:\r\n\r\n     class { 'elasticsearch':\r\n       package_url => 'file:/path/to/elasticsearch-0.90.7.deb'\r\n     }\r\n\r\nAutomatic upgrade of the software ( default set to false ):\r\n\r\n     class { 'elasticsearch':\r\n       autoupgrade => true\r\n     }\r\n\r\nRemoval/decommissioning:\r\n\r\n     class { 'elasticsearch':\r\n       ensure => 'absent'\r\n     }\r\n\r\nInstall everything but disable service(s) afterwards:\r\n\r\n     class { 'elasticsearch':\r\n       status => 'disabled'\r\n     }\r\n\r\nDisable automated restart of Elasticsearch on config file change:\r\n\r\n     class { 'elasticsearch':\r\n       restart_on_change => false\r\n     }\r\n\r\nFor the config variable a hash needs to be passed:\r\n\r\n     class { 'elasticsearch':\r\n       config                   => {\r\n         'node'                 => {\r\n           'name'               => 'elasticsearch001'\r\n         },\r\n         'index'                => {\r\n           'number_of_replicas' => '0',\r\n           'number_of_shards'   => '5'\r\n         },\r\n         'network'              => {\r\n           'host'               => $::ipaddress\r\n         }\r\n       }\r\n     }\r\n\r\nShort write up of the config hash is also possible.\r\n\r\nInstead of writing the full hash representation:\r\n\r\n     class { 'elasticsearch':\r\n       config                 => {\r\n         'cluster'            => {\r\n           'name'             => 'ClusterName',\r\n           'routing'          => {\r\n             'allocation'     => {\r\n               'awareness'    => {\r\n                 'attributes' => 'rack'\r\n               }\r\n             }\r\n           }\r\n         }\r\n       }\r\n     }\r\n\r\nYou can write the dotted key naming:\r\n\r\n     class { 'elasticsearch':\r\n       config => {\r\n         'cluster' => {\r\n           'name' => 'ClusterName',\r\n           'routing.allocation.awareness.attributes' => 'rack'\r\n         }\r\n       }\r\n     }\r\n\r\n\r\n## Manage templates\r\n\r\n### Add a new template\r\n\r\nThis will install and/or replace the template in Elasticearch\r\n\r\n     elasticsearch::template { 'templatename':\r\n       file => 'puppet:///path/to/template.json'\r\n     }\r\n\r\n### Delete a template\r\n\r\n     elasticsearch::template { 'templatename':\r\n       ensure => 'absent'\r\n     }\r\n\r\n### Host\r\n\r\n  Default it uses localhost:9200 as host. you can change this with the 'host' and 'port' variables\r\n\r\n     elasticsearch::template { 'templatename':\r\n       host => $::ipaddress,\r\n       port => 9200\r\n     }\r\n\r\n## Bindings / clients\r\n\r\nInstall a variety of [clients/bindings](http://www.elasticsearch.org/guide/clients/):\r\n\r\n### Python\r\n\r\n     elasticsearch::python { 'rawes': }\r\n\r\n### Ruby\r\n\r\n     elasticsearch::ruby { 'elasticsearch': }\r\n\r\n## Plugins\r\n\r\nInstall [a variety of plugins](http://www.elasticsearch.org/guide/clients/):\r\n\r\n### From official repository:\r\n\r\n     elasticsearch::plugin{'mobz/elasticsearch-head':\r\n       module_dir => 'head'\r\n     }\r\n\r\n### From custom url:\r\n\r\n     elasticsearch::plugin{ 'elasticsearch-jetty':\r\n       module_dir => 'jetty',\r\n       url        => 'https://oss-es-plugins.s3.amazonaws.com/elasticsearch-jetty/elasticsearch-jetty-0.90.0.zip'\r\n     }\r\n\r\n## Java install\r\n\r\nFor those that have no separate module for installation of java:\r\n\r\n     class { 'elasticsearch':\r\n       java_install => true\r\n     }\r\n\r\nIf you want a specific java package/version:\r\n\r\n     class { 'elasticsearch':\r\n       java_install => true,\r\n       java_package => 'packagename'\r\n     }\r\n\r\n## Service providers\r\n\r\nCurrently only the 'init' service provider is supported but others can be implemented quite easy.\r\n\r\n### init\r\n\r\n#### Defaults file\r\n\r\nYou can populate the defaults file ( /etc/defaults/elasticsearch or /etc/sysconfig/elasticsearch )\r\n\r\n##### hash representation\r\n\r\n     class { 'elasticsearch':\r\n       init_defaults => { 'ES_USER' => 'elasticsearch', 'ES_GROUP' => 'elasticsearch' }\r\n     }\r\n\r\n##### file source\r\n\r\n     class { 'elasticsearch':\r\n       init_defaults_file => 'puppet:///path/to/defaults'\r\n     }\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}